<?xml version="1.0" encoding="UTF-8"?>
<Module>
  <ModulePrefs title="OpenSocial Activity Sample">
    <Require feature="opensocial-1.0" />
    <Require feature="dynamic-height"/>  
  </ModulePrefs>
  <Content type="html">
   <![CDATA[
   
<script type="text/javascript">

function init() {
  gadgets.window.adjustHeight();
  document.form.onsubmit = function() {
    var title = document.form.title.value;
    var body = document.form.body.value;
    var params = {};
    params[opensocial.Activity.Field.TITLE] = title;
    params[opensocial.Activity.Field.BODY] = body;
    params[aipo.Activity.Field.RECIPIENTS] = ['org001:sample1', 'org001:sample2', 'org001:sample3'];
    var activity = opensocial.newActivity(params);
    opensocial.requestCreateActivity(activity, opensocial.CreateActivityPriority.HIGH, function(response) {
      gadgets.log(response);
      if (response.hadError()) {
        var code = response.getErrorCode();
        // do something...
      } else {
        // do something...
      }
    });

    return false;

  }
}

gadgets.util.registerOnLoadHandler(init);

</script>

<h1>OpenSocial Activity Sample</h1>
<form name="form">
<input type="text" name="title" /><br/>
<textarea name="body"></textarea><br/>
<input type="submit" value="Send" />
</form>

  ]]>
  </Content>
</Module>