<?xml version="1.0" encoding="UTF-8"?>
<Module>
  <ModulePrefs title="OSAPI Activity Sample">
    <Require feature="opensocial-1.0" />
    <Require feature="osapi" />
    <Require feature="dynamic-height"/>  
  </ModulePrefs>
  <Content type="html">
   <![CDATA[
   
<script type="text/javascript">

function init() {
  gadgets.window.adjustHeight();
  document.form.onsubmit = function() {
    var title = document.form.title.value;
    var body = document.form.body.value;
    osapi.activities.create({
      userId: '@viewer', activity: { title: title, body: body, recipients: [ 'org001:sample1', 'org001:sample2', 'org001:sample3' ] }
    }).execute(function(res) {
      gadgets.log(res);
    });

    return false;

  }
}

gadgets.util.registerOnLoadHandler(init);

</script>

<h1>OSAPI Activity Sample</h1>
<form name="form">
<input type="text" name="title" /><br/>
<textarea name="body"></textarea><br/>
<input type="submit" value="Send" />
</form>

  ]]>
  </Content>
</Module>